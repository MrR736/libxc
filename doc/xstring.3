.\" XSTRING(3) Manual Page
.TH XSTRING 3 "2025" "Extern Library" "Programmer's Manual"
.SH NAME
xstrlen, vxstrlen \- compute the length of a formatted narrow string
.SH SYNOPSIS
.nf
#include <xstring.h>

size_t vxstrlen(const char *restrict fmt, va_list ap);
size_t xstrlen(const char *restrict fmt, ...);
.fi

.SH DESCRIPTION
The xstring library supplies helper routines that compute the number of
characters required to format a string, without writing any output and
without allocating memory.

These functions parallel the behavior of snprintf(3) and vsnprintf(3)
when called with a NULL buffer and a size of zero.

.SH vxstrlen()
vxstrlen() returns the number of characters that would be produced by
formatting the string described by \fIfmt\fP with the argument list
\fIap\fP.

On Windows systems, the function wraps _vscprintf(), which returns the
required buffer length.

On POSIX systems, the function uses:

.RS
vsnprintf(NULL, 0, fmt, ap)
.RE

The return value excludes the final NUL terminator.

If the formatted output would fail or cannot be determined, the function
returns 0.

.SH xstrlen()
xstrlen() is a convenience function wrapping vxstrlen(), accepting a
variadic argument list.

.SH RETURN VALUES
Both functions return the number of characters, excluding the terminating
NUL, or 0 if a formatting error occurred or \fIfmt\fP is NULL.

These functions do not set errno.

.SH ERRORS
Formatting errors result in a return value of 0. No additional error
information is provided.

.SH PORTABILITY
Windows uses the native _vscprintf() routine.
POSIX uses vsnprintf(NULL,0,...).
The interface is portable across Windows, Linux, BSD, and macOS.

.SH EXAMPLES
.nf
size_t len = xstrlen("%s %d", "value", 10);
char *buf = malloc(len + 1);
sprintf(buf, "%s %d", "value", 10);
.fi

.SH SEE ALSO
snprintf(3), vsnprintf(3), strlen(3)

.SH AUTHOR
Written by MrR736.

.SH COPYRIGHT
GPLv3 or later.
