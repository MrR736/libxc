
static char* to_lowercase(const char* str) {
    size_t len = strlen(str);

    // Allocate memory for the new lowercase string (+1 for the null terminator)
    char* ret = (char*)malloc(len + 1);
    if (!ret) {
        // If malloc fails, return NULL (handle memory allocation failure)
        return NULL;
    }

    // Convert each character to lowercase
    for (size_t i = 0; i < len; i++) {
        ret[i] = (char)tolower((unsigned char)str[i]);
    }

    // Null-terminate the string
    ret[len] = '\0';

    return ret;
}
